<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.js_deposit_provider.dao.DepositBigDao">

    <resultMap type="com.example.js_deposit_provider.entity.DepositBig" id="DepositBigMap">
        <result property="depositBigid" column="deposit_bigId" jdbcType="INTEGER"/>
        <result property="depositBignumber" column="deposit_bigNumber" jdbcType="VARCHAR"/>
        <result property="depositBigcardid" column="deposit_bigCardId" jdbcType="VARCHAR"/>
        <result property="depositBigmoney" column="deposit_bigMoney" jdbcType="DOUBLE"/>
        <result property="depositBiglv" column="deposit_biglv" jdbcType="DOUBLE"/>
        <result property="depositBigbustype" column="deposit_bigBusType" jdbcType="INTEGER"/>
        <result property="depositBigintime" column="deposit_bigInTime" jdbcType="TIMESTAMP"/>
        <result property="depositBiglong" column="deposit_bigLong" jdbcType="INTEGER"/>
        <result property="depositBigouttime" column="deposit_bigOutTime" jdbcType="TIMESTAMP"/>
        <result property="depositBiguserid" column="deposit_bigUserId" jdbcType="INTEGER"/>
        <result property="depositBigstate" column="deposit_bigState" jdbcType="INTEGER"/>
    </resultMap>

    <!--查询单个-->
    <select id="queryById" resultMap="DepositBigMap">
        select
          deposit_bigId, deposit_bigNumber, deposit_bigCardId, deposit_bigMoney, deposit_biglv, deposit_bigBusType, deposit_bigInTime, deposit_bigLong, deposit_bigOutTime, deposit_bigUserId, deposit_bigState
        from jsbank.deposit_big
        where deposit_bigId = #{depositBigid}
    </select>

    <!--查询指定行数据-->
    <select id="queryAllByLimit" resultMap="DepositBigMap">
        select
          deposit_bigId, deposit_bigNumber, deposit_bigCardId, deposit_bigMoney, deposit_biglv, deposit_bigBusType, deposit_bigInTime, deposit_bigLong, deposit_bigOutTime, deposit_bigUserId, deposit_bigState
        from jsbank.deposit_big
        limit #{offset}, #{limit}
    </select>

    <!--通过实体作为筛选条件查询-->
    <select id="queryAll" resultMap="DepositBigMap">
        select
          deposit_bigId, deposit_bigNumber, deposit_bigCardId, deposit_bigMoney, deposit_biglv, deposit_bigBusType, deposit_bigInTime, deposit_bigLong, deposit_bigOutTime, deposit_bigUserId, deposit_bigState
        from jsbank.deposit_big
        <where>
            <if test="depositBigid != null">
                and deposit_bigId = #{depositBigid}
            </if>
            <if test="depositBignumber != null and depositBignumber != ''">
                and deposit_bigNumber = #{depositBignumber}
            </if>
            <if test="depositBigcardid != null and depositBigcardid != ''">
                and deposit_bigCardId = #{depositBigcardid}
            </if>
            <if test="depositBigmoney != null">
                and deposit_bigMoney = #{depositBigmoney}
            </if>
            <if test="depositBiglv != null and depositBiglv != ''">
                and deposit_biglv = #{depositBiglv}
            </if>
            <if test="depositBigbustype != null">
                and deposit_bigBusType = #{depositBigbustype}
            </if>
            <if test="depositBigintime != null">
                and deposit_bigInTime = #{depositBigintime}
            </if>
            <if test="depositBiglong != null">
                and deposit_bigLong = #{depositBiglong}
            </if>
            <if test="depositBigouttime != null">
                and deposit_bigOutTime = #{depositBigouttime}
            </if>
            <if test="depositBiguserid != null">
                and deposit_bigUserId = #{depositBiguserid}
            </if>
            <if test="depositBigstate != null">
                and deposit_bigState = #{depositBigstate}
            </if>
        </where>
    </select>

    <!--新增所有列-->
    <insert id="insert" keyProperty="depositBigid" useGeneratedKeys="true">
        insert into jsbank.deposit_big(deposit_bigNumber, deposit_bigCardId, deposit_bigMoney, deposit_biglv, deposit_bigBusType, deposit_bigInTime, deposit_bigLong, deposit_bigOutTime, deposit_bigUserId, deposit_bigState)
        values (#{depositBignumber}, #{depositBigcardid}, #{depositBigmoney}, #{depositBiglv}, #{depositBigbustype}, #{depositBigintime}, #{depositBiglong}, #{depositBigouttime}, #{depositBiguserid}, #{depositBigstate})
    </insert>

    <!--通过主键修改数据-->
    <update id="update">
        update jsbank.deposit_big
        <set>
            <if test="depositBignumber != null and depositBignumber != ''">
                deposit_bigNumber = #{depositBignumber},
            </if>
            <if test="depositBigcardid != null and depositBigcardid != ''">
                deposit_bigCardId = #{depositBigcardid},
            </if>
            <if test="depositBigmoney != null">
                deposit_bigMoney = #{depositBigmoney},
            </if>
            <if test="depositBiglv != null and depositBiglv != ''">
                deposit_biglv = #{depositBiglv},
            </if>
            <if test="depositBigbustype != null">
                deposit_bigBusType = #{depositBigbustype},
            </if>
            <if test="depositBigintime != null">
                deposit_bigInTime = #{depositBigintime},
            </if>
            <if test="depositBiglong != null">
                deposit_bigLong = #{depositBiglong},
            </if>
            <if test="depositBigouttime != null">
                deposit_bigOutTime = #{depositBigouttime},
            </if>
            <if test="depositBiguserid != null">
                deposit_bigUserId = #{depositBiguserid},
            </if>
            <if test="depositBigstate != null">
                deposit_bigState = #{depositBigstate},
            </if>
        </set>
        where deposit_bigId = #{depositBigid}
    </update>

    <!--通过主键删除-->
    <delete id="deleteById">
        delete from jsbank.deposit_big where deposit_bigId = #{depositBigid}
    </delete>

    <!--根据订单ID取款-->
    <update id="getBigWithdrawal">
        update deposit_big
        set deposit_bigMoney = deposit_bigMoney - #{bigmoney}
        where deposit_bigId = #{bigid}
    </update>

    <!--根据用户ID查询定期存款订单-->
    <select id="getAllBigInfoByID" resultMap="DepositBigMap">
        select deposit_bigId,deposit_bigNumber,deposit_bigBusType, deposit_bigCardId, deposit_bigMoney, deposit_biglv, deposit_bigInTime, deposit_bigOutTime,deposit_bigState
          from deposit_big
          where deposit_bigUserId = #{userid}
    </select>

    <!--根据订单ID查询订单余额-->
    <select id="getBigRemainMoney" resultMap="DepositBigMap">
        select deposit_bigCardId, deposit_bigMoney
          from deposit_big
          where deposit_bigId = #{bigOrderid}
    </select>

    <!--根据订单ID修改订单状态-->
    <update id="changOrderState">
        update deposit_big
        set deposit_bigState = 1
        where deposit_bigId = #{informid}
    </update>

    <!--根据日期获取订单信息-->
    <select id="getAllBigInfoByDay" resultMap="DepositBigMap">
        select  deposit_bigId,  deposit_bigCardId, deposit_bigMoney, deposit_biglv
        from deposit_big
        where deposit_bigOutTime = #{today}
    </select>
    <!--根据订单ID修改状态-->
    <update id="updateOrderState">
        update deposit_big
        set deposit_bigState=1
        where deposit_bigId = #{businessId}
    </update>
</mapper>